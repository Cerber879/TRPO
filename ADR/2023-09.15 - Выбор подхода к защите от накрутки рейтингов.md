**Дата:** 20 сентября 2023 г.

**Статус:** Принято

**Контекст:**

Система поиска и рекомендаций ресторанов должна защищаться от мошеннической активности: накрутки рейтингов, фальшивых отзывов, создания фейковых аккаунтов. Это критически важно для поддержания доверия пользователей и качества платформы (требование SEC03, PRN03).

**Рассмотренные варианты:**

1. **Правила и ограничения:** Простые правила (лимит отзывов с одного аккаунта, проверка IP-адресов, требование верификации).
2. **Статистический анализ:** Анализ паттернов поведения для выявления аномалий (слишком много отзывов за короткое время, подозрительные паттерны оценок).
3. **Машинное обучение:** Использование ML-моделей для детекции фейковых отзывов и накруток на основе различных признаков.
4. **Комбинированный подход:** Сочетание правил, статистического анализа и ML для многоуровневой защиты.

**Решение:**

Выбран комбинированный подход с приоритетом на правила и статистический анализ на начальном этапе.

**Обоснование:**

- **Быстрая реализация:** Правила и ограничения могут быть реализованы быстро и обеспечат базовую защиту.
- **Эффективность:** Статистический анализ позволяет выявлять большинство случаев накрутки без сложных ML-моделей.
- **Прозрачность:** Пользователи должны понимать ограничения (требование PRN02), что проще с rule-based подходом.
- **Масштабируемость:** По мере накопления данных можно добавлять ML-модели для улучшения детекции.
- **Многоуровневая защита:** Комбинация различных методов обеспечивает более надежную защиту, чем один подход.

**Недостатки решения:**

- **Ложные срабатывания:** Строгие правила могут блокировать легитимных пользователей.
- **Сложность:** Требуется координация различных механизмов защиты.

**Последствия:**

- Необходимо реализовать базовые правила: лимит на количество отзывов в день, требование верификации для владельцев ресторанов, проверка на дубликаты.
- Требуется система сбора метрик поведения пользователей для статистического анализа (частота действий, паттерны оценок, геолокация).
- Необходимо реализовать систему флагов (flags) для подозрительных действий с возможностью ручной проверки модераторами.
- Рекомендуется использовать CAPTCHA для критических действий (создание отзыва, регистрация ресторана).
- По мере накопления данных следует внедрять ML-модели для автоматической детекции фейковых отзывов и накруток.

