**Дата:** 20 сентября 2023 г.

**Статус:** Принято

**Контекст:**

Система поиска и рекомендаций ресторанов требует обработки и хранения изображений ресторанов (фотографии заведений, блюд, меню). Необходимо обеспечить загрузку, хранение, оптимизацию размеров и форматов изображений для различных устройств и разрешений экранов.

**Рассмотренные варианты:**

1. **Локальное хранение + простые библиотеки:** Хранение файлов в файловой системе или базе данных, базовая обработка через библиотеки типа Java ImageIO или Kotlin-обертки.
2. **Облачное хранилище (S3-совместимое):** Хранение в облачном хранилище с базовой обработкой на стороне приложения.
3. **Специализированные сервисы:** Использование сервисов типа Cloudinary или Imgix для хранения и обработки изображений (платные решения).
4. **MinIO + собственный обработчик:** S3-совместимое хранилище с собственным сервисом обработки изображений (избыточно для учебного проекта).

**Решение:**

Выбран подход с локальным хранением изображений в файловой системе и базовой обработкой через библиотеки Kotlin/Java.

**Обоснование:**

- **Простота:** Локальное хранение не требует настройки дополнительной инфраструктуры, что упрощает разработку и развертывание.
- **Достаточность:** Для учебного проекта базовой обработки изображений (изменение размера, конвертация форматов) достаточно.
- **Бесплатность:** Не требует оплаты внешних сервисов или сложной инфраструктуры.
- **Контроль:** Полный контроль над данными без зависимости от внешних сервисов.
- **Простота разработки:** Стандартные библиотеки для работы с изображениями хорошо документированы и просты в использовании.

**Недостатки решения:**

- **Ограниченная масштабируемость:** Локальное хранение может стать узким местом при росте количества изображений.
- **Базовая функциональность:** Ограниченные возможности обработки по сравнению со специализированными сервисами.

**Последствия:**

- Необходимо организовать структуру хранения изображений в файловой системе (например, по датам или ID ресторанов).
- Требуется реализовать базовую обработку изображений: изменение размера, генерация thumbnail'ов, валидация форматов.
- Необходимо обеспечить валидацию загружаемых изображений (размер файла, формат, базовые проверки).
- При необходимости масштабирования следует рассмотреть переход на облачное хранилище или специализированные сервисы.
- Рекомендуется ограничить максимальный размер загружаемых изображений для экономии места на диске.

