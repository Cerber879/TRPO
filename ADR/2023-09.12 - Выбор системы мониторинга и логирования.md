**Дата:** 20 сентября 2023 г.

**Статус:** Принято

**Контекст:**

Система поиска и рекомендаций ресторанов должна обеспечивать базовую наблюдаемость для обнаружения проблем и анализа производительности. Для учебного проекта необходимо выбрать простое решение для логирования и базового мониторинга, соответствующее требованиям MON01-MON03.

**Рассмотренные варианты:**

1. **Базовое логирование (Logback/SLF4J):** Стандартное логирование в файлы с ротацией. Простое решение без дополнительной инфраструктуры.
2. **Prometheus + Grafana:** Полноценный стек для метрик и визуализации. Мощный, но требует настройки инфраструктуры.
3. **Управляемые сервисы:** Использование платных сервисов типа Datadog или New Relic. Простое внедрение, но платное.
4. **Логирование + простые метрики:** Комбинация файлового логирования и базовых метрик в приложении.

**Решение:**

Выбран подход с базовым логированием через Logback/SLF4J и простыми метриками в приложении с возможностью экспорта в Prometheus в будущем.

**Обоснование:**

- **Простота:** Базовое логирование не требует настройки дополнительной инфраструктуры, что важно для учебного проекта.
- **Достаточность:** Для начального этапа файлового логирования достаточно для отладки и мониторинга основных проблем.
- **Стандартность:** Logback/SLF4J являются стандартом в экосистеме Kotlin/Java и хорошо интегрируются с фреймворками.
- **Гибкость:** При необходимости можно легко добавить Prometheus для сбора метрик без изменения логики логирования.
- **Бесплатность:** Не требует оплаты внешних сервисов или сложной инфраструктуры.

**Недостатки решения:**

- **Ограниченная аналитика:** Файловые логи сложнее анализировать, чем централизованные системы логирования.
- **Ручной мониторинг:** Требуется ручная проверка логов для обнаружения проблем.

**Последствия:**

- Необходимо настроить структурированное логирование с использованием уровней логирования (DEBUG, INFO, WARN, ERROR).
- Требуется настройка ротации логов для предотвращения переполнения диска.
- Рекомендуется логировать ключевые бизнес-события (поиски, просмотры, ошибки) для последующего анализа.
- При необходимости масштабирования следует рассмотреть переход на централизованное логирование (например, Loki или ELK Stack).
- Для базового мониторинга можно использовать простые счетчики и метрики в памяти приложения.

