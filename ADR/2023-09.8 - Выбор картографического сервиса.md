**Дата:** 20 сентября 2023 г.

**Статус:** Принято

**Контекст:**

Система поиска и рекомендаций ресторанов требует интеграции с картографическим сервисом для отображения ресторанов на карте, построения маршрутов, геокодирования адресов и поиска ресторанов поблизости. Необходимо выбрать надежный и функциональный сервис, доступный в целевых регионах.

**Рассмотренные варианты:**

1. **Yandex Maps API:** Российский картографический сервис с хорошим покрытием для России и стран СНГ. Поддерживает геокодирование, маршрутизацию, отображение карт.
2. **Google Maps API:** Международный стандарт с отличным покрытием по всему миру. Широкий функционал, но может быть дороже.
3. **OpenStreetMap / Leaflet:** Открытое решение с бесплатным использованием, но требует собственной инфраструктуры для геокодирования и маршрутизации.
4. **2GIS API:** Российский сервис с хорошим покрытием для крупных городов России, специализируется на бизнес-данных.

**Решение:**

Выбран Yandex Maps API как основной сервис с возможностью переключения на Google Maps API для международных регионов.

**Обоснование:**

- **Покрытие региона:** Yandex Maps обеспечивает отличное покрытие для России и стран СНГ, что соответствует начальному географическому охвату проекта.
- **Стоимость:** Более выгодные тарифы для российского рынка по сравнению с Google Maps.
- **Функциональность:** Полный набор необходимых функций: геокодирование, обратное геокодирование, построение маршрутов, кластеризация меток.
- **Интеграция:** Хорошая документация и поддержка на русском языке, что упрощает разработку.
- **Гибкость:** Архитектура позволяет легко добавить поддержку Google Maps для международных регионов в будущем.

**Недостатки решения:**

- **Ограниченное международное покрытие:** Для расширения в другие страны может потребоваться дополнительная интеграция с Google Maps.
- **Зависимость от внешнего сервиса:** Необходимо обрабатывать случаи недоступности API и предусмотреть деградацию функциональности.

**Последствия:**

- Необходимо реализовать абстракцию над картографическим API для возможности переключения между провайдерами.
- Требуется обработка ошибок и таймаутов при работе с внешним API.
- Необходимо кэшировать результаты геокодирования для снижения количества запросов к API.
- При недоступности картографического сервиса система должна продолжать работать с базовым поиском по адресам.

